################################################################################
# .env.example - MongoDB Docker Environment Configuration Template
################################################################################
# 
# Description:
#   Template file for MongoDB environment variables. Copy this file to .env and
#   customize the values according to your deployment requirements.
#
# Usage:
#   1. Copy this file: cp .env.example .env
#   2. Edit .env with your desired configuration values
#   3. Use with docker-compose: docker compose up -d
#
# Security Notice:
#   Change the default MONGO_INITDB_ROOT_USERNAME and MONGO_INITDB_ROOT_PASSWORD
#   values in production deployments. Generate secure credentials before deployment.
#
# Reference:
#   - Docker Compose: docker-compose.yml
#   - MongoDB Config: mongod.conf
#   - Dockerfile: Dockerfile
#
################################################################################

# === MONGODB ROOT CREDENTIALS ===
# Default root username (CHANGE IN PRODUCTION)
MONGO_INITDB_ROOT_USERNAME=root
# Default root password (CHANGE IN PRODUCTION - Should be at least 32 characters)
MONGO_INITDB_ROOT_PASSWORD=your_secure_password_here

# === MONGODB NETWORK CONFIGURATION ===
# Port to expose MongoDB service (change if port is already in use)
MONGODB_PORT=26444
# IP address to bind MongoDB to (0.0.0.0 = accessible from any interface)
MONGODB_BIND_IP=0.0.0.0

# === MONGODB SECURITY CONFIGURATION ===
# Enable authentication (values: enabled, disabled)
MONGODB_AUTHORIZATION=enabled

# === WIREDTIGER STORAGE ENGINE CONFIGURATION ===
# Cache size in GB (1-10 GB recommended, adjust based on available memory)
WIREDTIGER_CACHE_SIZE=1

# === MONGODB CONNECTION POOL CONFIGURATION ===
# Number of worker threads for handling client connections
MONGODB_THREAD_POOL_SIZE=8
# Maximum number of simultaneous client connections
MONGODB_MAX_CONNECTIONS=100

# === MONGODB QUERY PERFORMANCE MONITORING ===
# Query execution time threshold in milliseconds for profiling
MONGODB_SLOW_QUERY_MS=100

# === DOCKER CONTAINER RESOURCE CONSTRAINTS ===
# Number of CPUs allocated to the container
MONGODB_CPUS=2
# CPU cores to use (e.g., 0-1 means cores 0 and 1)
MONGODB_CPUSET_CPUS=0-1
# Memory limit for the container (e.g., 2g, 4g)
MONGODB_MEMORY=2g
# Memory swap limit (should equal or exceed MONGODB_MEMORY)
MONGODB_MEMORY_SWAP=2g
# Soft memory limit/reservation (should be lower than MONGODB_MEMORY)
MONGODB_MEMORY_RESERVATION=1.5g
# Block I/O weight for disk access priority (10-1000, default 500)
MONGODB_BLKIO_WEIGHT=500
# Maximum number of processes/threads for the container
MONGODB_PIDS_LIMIT=2048

# === MONGODB JOURNALING CONFIGURATION ===
# Enable write-ahead journaling for crash recovery
MONGODB_JOURNAL_ENABLED=true
# Journal commit interval in milliseconds (100-300 recommended)
MONGODB_JOURNAL_COMMIT_INTERVAL_MS=100

# === MONGODB LOGGING CONFIGURATION ===
# Log verbosity level (0=minimal, 1-5=more verbose)
MONGODB_LOG_VERBOSITY=0
# Operation profiling mode (0=off, 1=slow ops, 2=all ops)
MONGODB_OPERATION_PROFILING_MODE=1
# Profiling sample rate (0.0-1.0, 1.0=profile all)
MONGODB_PROFILING_SAMPLE_RATE=1.0

# === MONGODB DATA COMPRESSION CONFIGURATION ===
# Compressors for network traffic (snappy, zstd, zlib)
MONGODB_COMPRESSION_COMPRESSORS=snappy,zstd
# Enable TCP fast open for performance optimization
MONGODB_TCP_FAST_OPEN=true
# Enable IPv6 support
MONGODB_IPV6_ENABLED=false
# Enable flow control for consistent replication performance
MONGODB_FLOW_CONTROL_ENABLED=true

# === MONGODB QUERY MEMORY LIMITS ===
# Maximum memory in bytes for blocking sort operations (100MB)
MONGODB_QUERY_MAX_BLOCKING_SORT_MEMORY_BYTES=104857600
# Maximum document size for $lookup operations (100MB)
MONGODB_LOOKUP_MAX_DOCUMENT_SIZE_BYTES=104857600

# === MONGODB STORAGE OPTIMIZATION ===
# Enable maintenance mode for manual maintenance operations
MONGODB_MAINTENANCE_MODE_ENABLED=false
# Compressor for journal operations (snappy, zstd, none)
MONGODB_JOURNAL_COMPRESSOR=snappy
# Compressor for data blocks (snappy, zstd, none)
MONGODB_BLOCK_COMPRESSOR=snappy
# Create separate directory for indexes
MONGODB_DIRECTORY_FOR_INDEXES=true
# Statistics collection interval (0=disabled)
MONGODB_STATS_INTERVAL=0
# Enable prefix compression for indexes
MONGODB_PREFIX_COMPRESSION=true

# === SYSTEM RESOURCE LIMITS ===
# Maximum number of file descriptors for the process
MONGODB_MAX_FILE_DESCRIPTORS=65536
# Maximum number of processes/threads allowed
MONGODB_MAX_PROCESSES=4096

# === DOCKER CONTAINER LOG ROTATION ===
# Maximum size of a log file before rotation
MONGODB_LOG_MAX_SIZE=10m
# Maximum number of rotated log files to keep
MONGODB_LOG_MAX_FILE=3

# === DOCKER CONTAINER CONFIGURATION ===
# Container name for easy reference
CONTAINER_NAME=ai-pipeline-devops-crawler-mongodb
# Restart policy (no, always, unless-stopped, on-failure)
CONTAINER_RESTART_POLICY=unless-stopped

################################################################################
# End of MongoDB Environment Configuration
################################################################################
